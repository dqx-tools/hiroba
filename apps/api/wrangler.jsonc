{
	"$schema": "node_modules/wrangler/config-schema.json",
	"name": "dqx-tools--news",
	"main": "src/index.ts",
	"compatibility_date": "2025-11-21",
	"compatibility_flags": ["nodejs_compat"],
	"observability": {
		"enabled": true
	},
	// D1 Database binding for caching translations
	"d1_databases": [
		{
			"binding": "NEWS_DB",
			"database_name": "dqx-tools--news-db",
			"migrations_dir": "src/db/migrations"
		}
	],
	// Environment variables
	"vars": {
		"OPENAI_MODEL": "gpt-5.1"
	},
	// Cron triggers for scheduled jobs
	"triggers": {
		"crons": [
			"0 * * * *", // Every hour at minute 0 - news refresh
			"0 15 * * *" // Daily at 15:00 UTC (midnight JST) - glossary refresh
		]
	},
	// Production environment
	"env": {
		"production": {
			"routes": [
				{
					"pattern": "hiroba-api.dqx.tools/news*",
					"zone_name": "dqx.tools"
				},
				{
					"pattern": "hiroba-api.dqx.tools/categories*",
					"zone_name": "dqx.tools"
				},
				{
					"pattern": "hiroba-api.dqx.tools/health*",
					"zone_name": "dqx.tools"
				},
				{
					"pattern": "hiroba-api.dqx.tools/refresh*",
					"zone_name": "dqx.tools"
				}
			]
		}
	},
	// Development settings
	"dev": {
		"port": 8787,
		"local_protocol": "http"
	}
}
